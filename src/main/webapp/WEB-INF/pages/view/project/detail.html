<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:dt="http://github.com/dandelion/datatables"
        >

<head th:include="templates/layout :: headerFragment">
</head>

<body>
<div th:include="templates/layout :: menuFragment">
</div>
<div class="container-fluid">
	<div class="page-header">
    		<h2 th:text="'Project -' + ${project.name}">Project - ${x}</h2>
    </div>
    <div class = "col-md-6 column ui-sortable">
		<div class="panel panel-default">
			<div class="panel-heading">
    			<h4 class="panel-title" th:if="${viewing == project.author.email}">  This is your own observation. You can fully control it</h4>
    		<h4 class="panel-title" th:if="${#lists.contains(directAccessUsers, '' + viewing)}">  You have access to this observation via project or itself</h4>
	  		</div>
  			<div class="panel-body">
  				<div>
					<img th:src="@{'/project/getImage/' + ${project.id}}" class="img-thumbnail"/>
		    	</div>
  				<div class = "col-md-10">
  					<label for="name" class="col-md-3 control-label">Project Name:</label>
    				<div th:text="${project.name}" id = "name">name</div>
				</div>
				<div class = "col-md-10">
					<label for="description" class="col-md-3 control-label">Description</label>
    				<div>
			        	<div th:text="${project.description}" id = "phase">description</div>
		    		</div>
		    	</div>
				<div class = "col-md-10">
					<label for="created" class="col-md-3 control-label">Current Phase</label>
    				<div>
			        	<div th:text="${project.created}" id = "created">phase</div>
		    		</div>
		    	</div>
		    	<div class = "col-md-10">
					<label for="phase" class="col-md-3 control-label">Current Phase</label>
    				<div>
			        	<div th:text="${project.phase}" id = "phase">phase</div>
		    		</div>
		    	</div>
				<div class = "col-md-10">
					<label for="phase" class="col-md-3 control-label">Current Phase</label>
    				<div>
			        	<div th:text="${project.phase}" id = "phase">phase</div>
		    		</div>
		    	</div>		    		
		    </div>
		</div>
	</div>	
	<div class = "col-md-6 column ui-sortable">
			<div class="panel panel-default" th:if="${#lists.isEmpty(observations)}">
				<h4>This project has no observations assigned!</h4>
			</div>
			<div class="panel panel-default" th:unless="${#lists.isEmpty(observations)}">
				<div class="panel-heading">
     				<h4 class="panel-title">  Observations Associated</h4>
     			</div>
				<table dt:table="true" dt:theme="bootstrap2"
					th:unless="${#lists.isEmpty(observations)}"
    				dt:ext="bootstrap2-responsive"
    				dt:paginationType="bootstrap"
	        	   class="table table-striped table-condensed dataTable"
		           id="observations">
    		    	<thead>
    	    			<tr>
        					<th>
        	   					Observation Name
			        		</th>
			        	
			        	</tr>
   	    			</thead>
        			<tbody>
		        	<tr th:each="observation : ${observations}">
				
		    	        <td> <a href="detail.html"
    	    	    	        th:href="@{'/observation/detail/' + ${observation.id}}"
        	    		        th:text="${observation.name}">ObservationName</a>
        		    	</td>
	        		</tr>
	        		</tbody>

     			</table>
     		</div>
     		<div class="panel panel-default">
				<h3  th:if="${#lists.isEmpty(project.users)}">This is an author only project!</h3>     
			</div>
     		<div class="panel panel-default" th:unless="${#lists.isEmpty(project.users)}">	
     			<div class="panel-heading">
     				<h4 class="panel-title"> Users Associated</h4>
     			</div>
	     		<table dt:table="true" dt:theme="bootstrap2"
					th:unless="${#lists.isEmpty(project.users)}"
    				dt:ext="bootstrap2-responsive"
    				dt:paginationType="bootstrap"
	        	   class="table table-striped table-condensed dataTable"
		           id="users">
    		    	<thead>
    	    			<tr>
        					<th>
        	   					Username
			        		</th>
		        	
			        	</tr>
   		    		</thead>
        			<tbody th:unless="${#lists.isEmpty(project.users)}" >
		    	    <tr th:each="user : ${project.users}">
				
	    	    	    <td> <a href="detail.html"
        	    		        th:href="@{'/user/detail/' + ${user.id}}"
            		    	    th:text="${user.username}">UserName</a>
	        	    	</td>
		        	</tr>
	    	    	</tbody>
	
    	 		</table>
     		</div>			
			<div class="btn-group btn-group-lg btn-group-vertical pull-right">
	      		<button class="btn btn-default" type="button"><i class="glyphicon glyphicon-align-left"></i> Give Access</button>
    	  		<button class="btn btn-default" type="button"><i class="glyphicon glyphicon-align-center"></i> Add New Observation</button>
      			<button class="btn btn-default" type="button"><i class="glyphicon glyphicon-align-right"></i> Add Existing Observation</button>
      			<button class="btn btn-default" type="button"><i class="glyphicon glyphicon-align-justify"></i> Delete Project</button>
	    	</div>
	 </div>
	    	
</div>
<div th:include="templates/layout :: footerFragment">

</div>
<!-- DataTables CSS -->
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.4/css/jquery.dataTables.css"></link>

  
<!-- jQuery -->
<script type="text/javascript" charset="utf8" src="//code.jquery.com/jquery-1.11.1.min.js"></script>
  
<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.4/js/jquery.dataTables.js"></script>
<script type="text/javascript" charset="utf8" src="//cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.js"></script>
<script>
$(window).bind("load",function() {
  var x=document.getElementById("observations_paginate").childNodes;
  var att = document.createAttribute("class");
  att.value = "pagination";
  x[0].setAttributeNode(att);
  x=document.getElementById("users_paginate").childNodes;
  att = document.createAttribute("class");
  att.value = "pagination";
  x[0].setAttributeNode(att);
  });
</script>
</body>

</html>